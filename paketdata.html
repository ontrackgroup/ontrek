<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kembali </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cardo:ital,wght@0,400;0,700;1,400&family=Courgette&family=Honk&family=Pacifico&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Doodle+Shadow&family=Viga&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --my-color: #3949ab;
        }

        body {
            font-family: "Poppins", sans-serif;
            background: aliceblue;
        }

        header {
            background: var(--my-color);
            height: 90px;
            padding: 9px 0;
            border-radius: 0 0 20px 20px;
        }

        .gx-input1 {
            border: 2px solid #eaeaea;
        }

        .gx-input1:focus {
            border: 2px solid var(--my-color);
            box-shadow: none;
        }

        .product-container {

            grid-template-columns: auto 1fr;
            grid-column-gap: 10px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background-image: url('https://telegra.ph/file/4ad7e10cc2932f97b31c2.jpg');
        }

        .card-img-start {
            width: 40px;
            height: 40px;
        }

        a {
            color: #000000;
            text-decoration: none;
        }

        .loader {
            color: #3939ab;
            font-size: 10px;
            width: 1em;
            height: 1em;
            border-radius: 50%;
            position: relative;
            text-indent: -9999em;
            animation: mulShdSpin 1.3s infinite linear;
            transform: translateZ(0);
        }

        @keyframes mulShdSpin {

            0%,
            100% {
                box-shadow: 0 -3em 0 0.2em,
                    2em -2em 0 0em, 3em 0 0 -1em,
                    2em 2em 0 -1em, 0 3em 0 -1em,
                    -2em 2em 0 -1em, -3em 0 0 -1em,
                    -2em -2em 0 0;
            }

            12.5% {
                box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em,
                    3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em,
                    -2em 2em 0 -1em, -3em 0 0 -1em,
                    -2em -2em 0 -1em;
            }

            25% {
                box-shadow: 0 -3em 0 -0.5em,
                    2em -2em 0 0, 3em 0 0 0.2em,
                    2em 2em 0 0, 0 3em 0 -1em,
                    -2em 2em 0 -1em, -3em 0 0 -1em,
                    -2em -2em 0 -1em;
            }

            37.5% {
                box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
                    3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em,
                    -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;
            }

            50% {
                box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
                    3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em,
                    -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;
            }

            62.5% {
                box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em,
                    3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0,
                    -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;
            }

            75% {
                box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em,
                    3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em,
                    -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 -1em;
            }

            87.5% {
                box-shadow: 0em -3em 0 0, 2em -2em 0 -1em,
                    3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em,
                    -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;
            }
        }

        /* Sidebar CSS */
        .sidebar {
            position: fixed;
            bottom: -480px;
            /* Jarak sidebar dari sisi kiri layar */
            width: 100%;
            /* Lebar sidebar */
            background-color: #fff;
            border-right: 1px solid #ccc;
            transition: 0.3s;
            /* 0.5 second transition effect to slide in the sidebar */

            z-index: 1050;
            /* Pastikan z-index lebih tinggi dari konten lainnya */
        }

        .sidebar-header {
            padding: 1rem;
            border-bottom: 1px solid #ccc;
        }

        .sidebar-body {
            padding: 1rem;
            overflow-y: auto;
        }

        .sidebar.active {
            bottom: 0;
            /* Sidebar muncul saat left bernilai 0 */
        }

        body.sidebar-active {
            overflow: hidden;
            /* Menghilangkan kemampuan untuk menggulir */
        }

        .sidebar-active::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            /* Warna latar belakang yang gelap */
            z-index: 1040;
            /* Pastikan z-index lebih rendah dari sidebar */
        }

        #productName,
        #productPrice,
        #productDescription {
            margin-bottom: 10px;
        }

        #buyButton {
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        .show {
            display: block;
        }

        .icon-with-margin {
            margin-right: 5px;
        }

        .collapse {
            border: none !important;
            background: transparent;
        }

        .gx-input-1 {
            border: 2px solid #eaeaea;
        }

        .gx-input-1:focus {
            border: 2px solid var(--my-color);
            box-shadow: none;
        }

        .width-25px {
            width: 60%;


        }

        .gx-button-costum {
            border: none;
            background: transparent;
            padding: 4px 0;
            font-weight: 400;
            color: #000000;
        }

        .gx-button-costum.active {
            background: var(--my-color);
            color: #fff;
        }

        .f-grid {
            display: grid;
        }

        .notification {
            background-color: #f44336;
            color: white;
            padding: 10px;
            margin-top: 10px;
        }

        .visible {
            display: block;
        }
    </style>
</head>

<body>

    <header>
        <div class="gx-header">
            <div class="container">
                <div class="shadow p-3 mb-5 bg-body-tertiary rounded">
                    <div class="gx-img d-flex">
                        <img class="rounded-1" id="productImageTitle"
                            src="https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/pulsa-reguler.jpg?w=1024"
                            style="width:35px;height:35px;" />
                        <h1 class="ms-1" id="productTitle" style="font-size:15px;margin-top:9px;">Topup Paket Data</h1>
                    </div>
                    <h1 style="font-size:12px;margin-top:15px;color:#666;">Nomor Telepon</h1>
                    <div class="gx-input d-flex">
                        <input type="tel" id="userId" class="form-control mb-3 gx-input1 {{hasil_kontak}}"
                            placeholder="Enter your number">
                        <i class="fa-solid fa-address-book ms-1" style="font-size:25px;margin-top:6px;color:#3949ab;"
                            onclick="getContant()"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="gx-button" style="margin-top:90px;">
            <div class="shadow p-3 mb-5 bg-body-tertiary rounded">
                <div class="gx-button1 rounded-1" style="background:#eaeaea;padding:9px 0;">
                    <div class="row">
                        <div class="col-12" style="margin-left:12px;padding-right:40px">
                            <select id="bootstrapSelect" class="form-select" style="" disabled>
                                <option value="">Masukkan Nomor</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="gx-icon d-flex justify-content-end">
                        <div class="col-8 justify-content-start">
                            <div style="min-height: 40px;">
                                <div class="collapse collapse-horizontal" id="collapseWidthExample">
                                    <div class="" style="">
                                        <input type="text" class="form-control mb-3 gx-input-1" id="searchInput"
                                            placeholder="Search Product..."
                                            style="margin-top:9px;margin-left:-6px;margin-right:9px;" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-1" style="margin-right:9px;">
                            <i id="icon" class="fas fa-search text-end" style="font-size:20px;margin-top:16px;"
                                data-bs-toggle="collapse" data-bs-target="#collapseWidthExample" aria-expanded="false"
                                aria-controls="collapseWidthExample" onclick="toggleInput()"></i>
                        </div>
                        <div class="col-1" style="margin-right:9px;">
                            <img id="toggleImage1" src="https://cdn-icons-png.flaticon.com/128/16/16410.png"
                                alt="Toggle Image" style="width:20px;height:20px;margin-top:16px;">
                        </div>
                        <div class="col-1" style="margin-right:0">
                            <!-- Image button for List Dan Grid -->
                            <img src="https://cdn-icons-png.flaticon.com/128/151/151917.png" id="toggleImage"
                                alt="List Icon" style="width:20px;height:20px;margin-top:16px;">
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row animate__animated animate__fadeInLeft" id="productList" style="margin-top:-25px;">
            <!-- Product items will be appended here -->
            <div class="container d-flex justify-content-center align-items-center vh-100">
                <div id="loading"></div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="gx-test" id="gx-img-test">
            <div class="gx-img d-flex justify-content-center">
                <img src="https://assets-global.website-files.com/61ebe5f773be1acd620f8208/61fb83eaea462c39a5ca8bd4_mobile-app-testing.gif"
                    style="width:200px;height:200px;" />
            </div>
            <p class="text-center mt-1">Masukkan Nomor Terlebih Dahulu</p>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebarExample">
        <div class="sidebar-header text-white"
            style="margin-left:20px;margin-right:20px;border-radius:0 0 40px 40px;background:#3949ab;">
            <h5 class="sidebar-title text-center" style="font-size:15px;">Detail Transaksi</h5>

        </div>
        <div class="sidebar-body">
            <div class="sidebar-img d-flex justify-content-center">
                <img src="" class="rounded-1" id="productImage" style="width:60px;height:60px;" />
            </div>
            <div class="sidebar-text">
                <h1 class="text-center mt-1" id="productName" style="font-size:15px;"></h1>
            </div>
            <div class="sidebar-deskripsi rounded-1"
                style="background:aliceblue;padding:9px 0;border:2px dotted #3939ab;">
                <h1 class="" id="" style="font-size:12px;margin-left:9px;margin-top:9px;color:#666;">Deskripsi Produk :
                </h1>
                <h1 class="" id="productDescription" style="font-size:15px;margin-left:9px;margin-top:-6px;"></h1>
            </div>

            <div class="gx-test" style="border-bottom:2px dotted #666;">
                <div class="row">
                    <div class="col-6">
                        <h1 class="text-start" style="font-size:15px;color:#666;margin-top:12px;">Tujuan : </h1>
                    </div>
                    <div class="col-6">
                        <h1 class="text-end" style="margin-top:12px;font-size:15px;" id="number">Isi Dulu</h1>
                    </div>
                </div>
            </div>
            <div class="gx-test" style="border-bottom:2px dotted #666;">
                <div class="row">
                    <div class="col-6">
                        <h1 class="text-start" style="font-size:15px;color:#666;margin-top:12px;">Total Pembayaran :
                        </h1>
                    </div>
                    <div class="col-6">
                        <h1 class="text-end" id="productPrice" style="margin-top:12px;font-size:15px;"></h1>
                    </div>
                </div>
            </div>
            <div class="sidebar-button">
                <div class="row">
                    <div class="col-6">
                        <button type="button" class="btn btn-secondary mt-4" style="width:100%;"
                            onclick="closeSidebar()">Kembali</button>
                    </div>
                    <div class="col-6">
                        <button type="button" id="buyButton" class="btn btn-success mt-4"
                            style="width:100%;">Beli</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Sidebar -->

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        function openSidebar() {
            document.getElementById("sidebarExample").classList.add("active");
            // Tambahkan kelas untuk mengubah latar belakang body
            document.body.classList.add("sidebar-active");
        }

        function closeSidebar() {
            document.getElementById("sidebarExample").classList.remove("active");
            // Hapus kelas untuk mengubah latar belakang body
            document.body.classList.remove("sidebar-active");
        }

        // Tambahkan event listener untuk menutup
        window.addEventListener('mouseup', function (event) {
            var sidebar = document.getElementById('sidebarExample');
            if (!sidebar.contains(event.target)) {
                closeSidebar();
            }
        });

        $(document).ready(function () {
            let allProducts = [];
            let selectedProduct = {};
            let isListView = true;
            var ka = "";

            var changeKaButtons = document.querySelectorAll(".gx-button-costum"); // Tombol-tombol untuk mengubah nilai ka        

            function toggleView() {
                isListView = !isListView;
                displayProducts();
                let toggleImage = $('#toggleImage');
                toggleImage.attr('src', isListView ? 'https://cdn-icons-png.flaticon.com/128/151/151917.png' : 'https://cdn-icons-png.flaticon.com/128/238/238910.png');
                toggleImage.attr('alt', isListView ? 'List View' : 'Grid View');

                // Menambah atau menghapus kelas d-block berdasarkan isListView
                $('.product-container').toggleClass('d-block', !isListView);
            }

            $('#toggleImage').click(function () {
                toggleView();
            });

            function fetchData(page) {
                $.ajax({
                    url: `https://openapi.bukaolshop.net/v1/app/produk?token=eyJhcHAiOiIzMzkzMyIsImF1dGgiOiIyMDIwMDkwMyIsInNpZ24iOiI2NWhOM1dQQVRpTkZ1RzlEYU5MNVlnPT0ifQ==&page=${page}&id_kategori=${ka}`,
                    method: 'GET',
                    success: function (response) {
                        allProducts.push(...response.data);
                        displayProducts();
                    },
                    beforeSend:
                        function () {
                            $('#loading').html('<div class="loader"></div>');
                        },
                    complete: function () {
                    }
                });
            }

            function showProductDetails() {
                $('#productName').text(selectedProduct.nama_produk);
                $('#productPrice').text(selectedProduct.formattedPrice);
                $('#productDescription').text(selectedProduct.deskripsi_singkat);
                $('#productImage').attr('src', selectedProduct.url_gambar_produk); // Menambahkan gambar produk
                $('#buyButton').attr('href', `${selectedProduct.url_produk}?catatan=${$('#userId').val()}`);
                openSidebar(); // Membuka sidebar saat detail produk ditampilkan
            }

            $(document).ready(function () {
                $("#searchInput").on("keyup", function () {
                    var searchTerm = $(this).val().toLowerCase();
                    var found = false;

                    $(".product-container").each(function () {
                        var productName = $(this).text().toLowerCase();
                        if (productName.includes(searchTerm)) {
                            found = true;
                            if (isListView) {
                                $(this).removeClass('d-none').addClass('d-grid');
                            } else {
                                $(this).removeClass('d-none').addClass('d-block');
                            }
                        } else {
                            $(this).removeClass('d-block d-grid').addClass('d-none');
                        }
                    });
                    if (!found) {
                        Swal.fire({
                            text: 'No Products Found.',
                            position: 'top',
                            showConfirmButton: false,
                            timer: 1500,
                            background: '#ffcccc',
                            showClass: {
                                popup: 'animate__animated animate__fadeInDown'
                            },
                            customClass: {
                                popup: 'animate__animated animate__fadeInDown bg-danger text-white rounded-4 width-25px'
                            }
                        });
                        $("#searchInput").val(''); // Hapus teks dari input
                        $(".product-container").removeClass('d-none');
                        if (isListView) {
                            $(".product-container").addClass('d-grid');
                        } else {
                            $(".product-container").addClass('d-block');
                        }
                    }
                });
            });

            function displayProducts() {
                allProducts.sort((a, b) => a.harga_produk - b.harga_produk);
                $('#productList').empty();
                $('#loading').empty();

                $.each(allProducts, function (index, product) {
                    let item = isListView ? `
            <div class="col-12 mb-3">
        ` : `
            <div class="col-6 mb-3">
        `;

                    let formattedPrice = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', maximumFractionDigits: 0 }).format(product.harga_produk);

                    item += `
            <a href="#" class="product-sidebar" data-id="${index}">
                <div class="gx-search">
                <div class="product-container f-grid animate__animated animate__fadeIn">
                    <div class="gx-img-product d-flex justify-content-center align-items-center">
                    <img src="${product.url_gambar_produk}" class="product rounded-1 card-img-start" alt="${product.nama_produk}" style="width:40px;height:40px;">
                    </div>
                    <div class="card-body">
                        <h5 class="card-title mt-1" style="font-size:14px;font-weight:600;">${product.nama_produk}</h5>
                        <p class="card-text" style="font-size:14px;color:#666;font-weight:600;">${product.deskripsi_singkat}</p>
                        <p class="card-text" style="font-size:14px;color:#3949ab;font-weight:600;margin-top:-18px;">${formattedPrice}</p>
                    </div>
                </div>
                </div>
            </a>
        `;

                    $('#productList').append(item);
                });

                $('.product-sidebar').click(function (e) {
                    e.preventDefault();
                    let productId = $(this).data('id');
                    selectedProduct = {
                        nama_produk: allProducts[productId].nama_produk,
                        formattedPrice: new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', maximumFractionDigits: 0 }).format(allProducts[productId].harga_produk),
                        deskripsi_singkat: allProducts[productId].deskripsi_singkat,
                        url_gambar_produk: allProducts[productId].url_gambar_produk,
                        url_produk: allProducts[productId].url_produk
                    };
                    showProductDetails();
                });
            }

            $('#buyButton').click(function () {
                let productUrl = $(this).attr('href');
                window.location.href = productUrl;
            });

            // Fungsi untuk menampilkan animasi loading
            function showLoading() {
                $('#loading').html('<div class="loader"></div>');
            }

            // Fungsi untuk menyembunyikan animasi loading
            function hideLoading() {
                $('#loading').empty();
            }

            const kategoriUrls = [
                {
                    "Idkategori1": "554480",
                    "Warna": "linear-gradient(to right, #BD180F, #F56338)",
                    "urlkategori": "https://ontrackppob.my.id/kategori/kuota-tsel-550461",
                    "propaider": "Telkomsel",
                    "logo": "https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/telkomsel-1.jpg?w=1024",
                    "nomorpemanggil": ["0811", "0812", "0813", "0821", "0822", "0852", "0853", "0823", "0851", "0835"]
                },
                {
                    "Idkategori1": "530000",
                    "Warna": "linear-gradient(to right, #F03665, #F56338)",
                    "propaider": "Tre ID",
                    "urlkategori": "urlkategori",
                    "logo": "https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/three.jpg?w=1024",
                    "nomorpemanggil": ["0895", "0896", "0897", "0898", "0899"]
                },
                {
                    "Idkategori1": "553348",
                    "Warna": "linear-gradient(to right, #703090, #703090)",
                    "propaider": "Axis ",
                    "urlkategori": "https://grizeshopid.bukaolshop.site/kategori/paket-internet-axis-555862",
                    "logo": "https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/axis.jpg?w=1024",
                    "nomorpemanggil": ["0838", "0831", "0832", "0833"]
                },
                {
                    "Idkategori1": "553695",
                    "Warna": "linear-gradient(to right, #F8B80E, #F19722)",
                    "propaider": "Indosat",
                    "urlkategori": "https://grizeshopid.bukaolshop.site/kategori/paket-internet-isat-555864",
                    "logo": "https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/indosat.jpg?w=1024",
                    "nomorpemanggil": ["0814", "0815", "0816", "0855", "0856", "0857", "0858"]
                },
                {
                    "Idkategori1": "543882",
                    "Warna": "linear-gradient(to right, #0128A7, #00C798)",
                    "propaider": "Xl axiata",
                    "urlkategori": "https://ontrackppob.my.id/kategori/kouta-xl-543882",
                    "logo": "https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/xl.jpg?w=1024",
                    "nomorpemanggil": ["0818", "0817", "0819", "0859", "0877", "0878"]
                },
                {
                    "Idkategori1": "553943",
                    "Warna": "linear-gradient(to right, #C80050, #F84277)",
                    "propaider": "Smartfren",
                    "urlkategori": "https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/smartfren.jpg?w=1024",
                    "logo": "https://i.ibb.co/D7TCSpD/527165522b.jpg",
                    "nomorpemanggil": ["0881", "0882", "0883", "0884", "0885", "0886", "0887", "0888", "0889"]
                }
                // Tambahkan kategori lainnya sesuai kebutuhan
            ];
            async function changeKaByNomorPemanggil(inputValue) {
                let found = false;

                for (let i = 0; i < kategoriUrls.length; i++) {
                    for (let j = 0; j < kategoriUrls[i].nomorpemanggil.length; j++) {
                        if (inputValue === kategoriUrls[i].nomorpemanggil[j]) {
                            ka = kategoriUrls[i].Idkategori1;
                            found = true;
                            $('#productImageTitle').attr('src', kategoriUrls[i].logo); // Mengganti gambar
                            $('#productTitle').text(kategoriUrls[i].propaider); // Mengganti judul

                            // Mengambil data kategori dari API
                            const response = await fetch('https://openapi.bukaolshop.net/v1/app/kategori?token=eyJhcHAiOiIzMzkzMyIsImF1dGgiOiIyMDIwMDkwMyIsInNpZ24iOiI2NWhOM1dQQVRpTkZ1RzlEYU5MNVlnPT0ifQ==');
                            const data = await response.json();
                            const kategori = data.data;

                            // Mencari kategori dengan url_kategori yang sesuai
                            const kategoriUtama = kategori.find(kat => kat.url_kategori === kategoriUrls[i].urlkategori);

                            // Mengambil sub_kategori dari kategoriUtama
                            const subKategori = kategoriUtama.sub_kategori;

                            // Mengosongkan dan menambahkan opsi dropdown sesuai dengan sub_kategori dari API
                            $('#bootstrapSelect').empty();
                            subKategori.forEach((subKat) => {
                                $('#bootstrapSelect').append($('<option>', {
                                    value: subKat.id_kategori,
                                    text: subKat.nama_kategori
                                }));
                            });

                            break;
                        }
                    }
                    if (found) {
                        $('.form-select').prop('disabled', false);
                        break;
                    }
                }

                if (!found) {
                    return;
                }

                allProducts = [];
                showLoading();

                for (let page = 1; page <= 5; page++) {
                    fetchData(page);
                    if (!isListView) {
                        toggleView();
                    }
                }
            }

            // Event listener untuk meng-handle input nomorpemanggil
            $("#userId").on("keyup", function () {
                let inputValue = $(this).val();
                if (inputValue.trim() === "") {
                    $("#productList").css('display', 'none');
                    $("#gx-img-test").css('display', 'block');
                    ka = "";
                    // Setel gambar dan teks default
                    $('#productImageTitle').attr('src', 'https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/pulsa-reguler.jpg?w=1024');
                    $('#productTitle').text('Topup Paket Data');
                    $("#bootstrapSelect").empty(); // Mengosongkan pilihan dropdown saat input kosong
                    $("#bootstrapSelect").append($('<option>', {
                        value: '',
                        text: 'Masukkan Nomor'
                    }));
                    $('#bootstrapSelect').prop('disabled', true);
                } else if (inputValue.length < 4) {
                    $("#productList").css('display', 'none');
                    $("#gx-img-test").css('display', 'block');
                    // Setel gambar dan teks default
                    $('#productImageTitle').attr('src', 'https://fidssoffc.wordpress.com/wp-content/uploads/2024/04/pulsa-reguler.jpg?w=1024');
                    $('#productTitle').text('Topup Paket Data');
                    $("#bootstrapSelect").empty(); // Mengosongkan pilihan dropdown saat input kurang dari 4 karakter
                    $("#bootstrapSelect").append($('<option>', {
                        value: '',
                        text: 'Masukkan Nomor'
                    }));
                    $('#bootstrapSelect').prop('disabled', true);
                } else {
                    $("#productList").show();
                    $("#gx-img-test").css('display', 'none');
                    changeKaByNomorPemanggil(inputValue);
                }
            });

            // Fungsi untuk mengubah nilai ka
            function changeKa(value) {
                ka = value;
                allProducts = []; // Mengosongkan array produk
                showLoading(); // Menampilkan animasi loading saat data dimuat    
                for (let page = 1; page <= 5; page++) {
                    fetchData(page); // Memuat produk baru sesuai dengan ka yang baru
                    // Menyesuaikan kelas d-block berdasarkan mode tampilan
                    if (!isListView) {
                        toggleView()
                    }
                }
            }

            // Event listener untuk meng-handle perubahan pada select
            $('#bootstrapSelect').change(function () {
                let optionValue = $(this).val();

                // Mengirim nilai dari opsi yang dipilih ke variabel ka
                changeKa(optionValue);

                // Nonaktifkan select sementara operasi sedang dilakukan
                $('#bootstrapSelect').prop('disabled', true);

                // Setel timeout untuk mengaktifkan kembali select setelah 3 detik
                setTimeout(() => {
                    $('#bootstrapSelect').prop('disabled', false);
                }, 3000);
            });

            // Fungsi untuk menampilkan animasi loading
            function showLoading() {
                $('#loading').html('<div class="loader"></div>');
            }

            // Fungsi untuk menyembunyikan animasi loading
            function hideLoading() {
                $('#loading').empty();
            }

            // Memanggil fetchData untuk memuat produk saat halaman dimuat
            $(document).ready(function () {
                for (let page = 1; page <= 5; page++) {
                    fetchData(page);
                }
            });
        });
    </script> <!-- Ini penutup tag <script> yang hilang -->

    <script>

        const buttons = document.querySelectorAll('.gx-button-test');

        buttons.forEach(button => {
            button.addEventListener('click', function () {
                buttons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
            });
        });

    </script>
    <script>

        function toggleInput() {
            var input = document.getElementById("input");
            var icon = document.getElementById("icon");

            if (icon.classList.contains("fa-search")) {
                icon.classList.remove("fa-search");
                icon.classList.add("fa-times");
            } else {
                icon.classList.remove("fa-times");
                icon.classList.add("fa-search");
            }
        }

    </script>
    <script>
        document.getElementById("toggleImage1").addEventListener("click", function () {
            var products = document.querySelectorAll(".product");
            var isHidden = false;

            for (var i = 0; i < products.length; i++) {
                if (products[i].classList.contains("d-none")) {
                    isHidden = true;
                    break;
                }
            }

            for (var i = 0; i < products.length; i++) {
                products[i].classList.toggle("d-none");
            }
            var toggleImage = document.getElementById("toggleImage1");
            if (isHidden) {
                toggleImage.src = "https://cdn-icons-png.flaticon.com/128/16/16410.png";
                Swal.fire({
                    text: 'Gambar Muncul',
                    position: 'top',
                    showConfirmButton: false,
                    timer: 1500,
                    background: '#ffcccc',
                    showClass: {
                        popup: 'animate__animated animate__fadeInDown'
                    },
                    customClass: {
                        popup: 'animate__animated animate__fadeInDown bg-danger text-white rounded-4 width-25px'
                    }
                });
            } else {
                toggleImage.src = "https://cdn-icons-png.flaticon.com/128/739/739249.png";
                Swal.fire({
                    text: 'Gambar Hilang',
                    position: 'top',
                    showConfirmButton: false,
                    timer: 1500,
                    background: '#ffcccc',
                    showClass: {
                        popup: 'animate__animated animate__fadeInDown'
                    },
                    customClass: {
                        popup: 'animate__animated animate__fadeInDown bg-danger text-white rounded-4 width-25px'
                    }
                });
            }
        });

    </script>
    <script>
        document.getElementById('productList').addEventListener('click', updateNumber);

        function updateNumber() {
            var userInput = document.getElementById('userId').value.trim(); // Get user input
            var numberElement = document.getElementById('number');
            if (userInput === '') {
                numberElement.innerText = 'Masukkan Nomor';
                numberElement.style.color = 'red'; // Set text color to red
            } else {
                numberElement.innerText = userInput;
                numberElement.style.color = 'black'; // Set text color to black
            }
        }

    </script>
    <script>
        $(document).ready(function () {
            $(".gx-button-test").click(function () {
                var title = $(this).data("title");
                var image = $(this).data("image");
                $("#productTitle").text(title);
                $("#productImageTitle").attr("src", image);
            });
        });

    </script>
    <script>
        var domainbukaolshop = "https://grizeshopid.bukaolshop.site"
        var getcontactbukaolshop = "/ambil_kontak"

        function getContant() {
            window.location.href = domainbukaolshop + getcontactbukaolshop
        }
    </script>
    <script>

        $(document).ready(function () {
            // Periksa input setiap 1 detik
            setInterval(function () {
                let inputField = $('#userId');
                let inputVal = inputField.val();

                // Jika nilai input dimulai dengan '+628', ganti dengan '08'
                if (inputVal.startsWith('+628')) {
                    inputField.val(inputVal.replace('+628', '08'));
                }
            }, 1000); // 1000 ms = 1 detik
        });

    </script>
    <script>

    </script>

</body>
<html>